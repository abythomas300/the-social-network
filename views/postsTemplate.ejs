<!DOCTYPE html>
<html lang="en">
<%- include('partials/_head') %>
<body>
 
    <%- include('partials/_header') %>
    
    <%- include('partials/_navbar') %>

    <!--Helper function to convert date from YYYY-MM-DD to DD-MM-YYYY -->
    <%
        function dateConversion(dateInYMD){
            const parts = dateInYMD.split('-')
            const dateInDMY = `${parts[2]}-${parts[1]}-${parts[0]}`
            return dateInDMY;
        }
    %>

    <!--Template for displaying all blog posts -->
    
    <%if(data.message.length > 0) {%>

        <div class="alert alert-success fade show d-flex align-items-center justify-content-center gap-3" role="alert">
            <%= data.message %>
            <button type="button" class="btn-close" data-bs-dismiss="alert" ></button>
          </div>

    <%}%>


    <%if(data.blogs.length > 0) {%>

            <%data.blogs.forEach(function(blog){%>
                    
                <div class="container my-5">
                    <div class="row">
                        <div class="col-md-8 offset-md-2">
                            <h4 class="display-4 text-center mb-4"><%= blog.title %></h4>
                            <p class="text-muted text-center mb-4">Posted by <span class="fst-italic fw-bold"><%= blog.author.username %></span> on <%= dateConversion(blog.createdAt.toISOString().substring(0,10)) %></p>
                            <div class="content">
                                <p><%= blog.content %></p>
                            </div>
                        </div>
                    </div>
                </div>
                <hr class="hr">

            <%})%>

    <%} else {%>

        <div class="container my-5">
            <h4 class="display-4 text-center mb-4">No new posts for now</h4>
        </div>

    <%}%>
    
    <%- include('partials/_footer') %>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>