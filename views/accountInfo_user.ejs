<!DOCTYPE html>
<html lang="en">
    
<%- include('partials/_head') %>

<style>
    body {
      background-color: #aeb3ba63;
    }
    .profile-card {
      border: none;
      border-radius: 15px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      transition: transform 0.3s ease;
    }
    .profile-card:hover {
      transform: translateY(-5px);
    }
    .profile-header {
      background: linear-gradient(135deg, #0d6efd, #0b5ed7);
      height: 120px;
    }
    .profile-pic {
      width: 120px;
      height: 120px;
      object-fit: cover;
      border: 4px solid #fff;
      border-radius: 50%;
      margin-top: -60px;
    }
    .badge-status {
      font-size: 0.9rem;
      padding: 0.4rem 0.8rem;
      border-radius: 12px;
    }
    p{
        display: inline;
    }
</style>
<body>

    <!-- Helper function to convert date from YYYY-MM-DD to DD-MM-YYYY -->
    <% function dateConversion(dateInYMD){
        const parts = dateInYMD.split('-')
        const dateInDMY = `${parts[2]}-${parts[1]}-${parts[0]}`
        return dateInDMY;
    }%>

    <%- include('partials/_header') %>

    <%- include('partials/_navbar') %>

    <div class="container my-5">
        <div class="row justify-content-center">
          <div class="col-12 col-md-8 col-lg-5">
            <div class="card profile-card text-center">
              <div class="profile-header"></div>
              <div class="card-body">
                <img src="https://avatar.iran.liara.run/username?username=<%=currentUser.username%>" alt="Profile Picture" class="profile-pic shadow">
                <h4 class="mt-3 mb-0"><%=currentUser.username%></h4>
                <span class="badge bg-primary badge-status mb-3 mt-2"><%=currentUser.role%></span>
                
                <ul class="list-group list-group-flush text-start">

                 <%if(currentUser.restrictionStatus){%>
                     <li class="list-group-item">
                         <strong>Account Status: </strong> <span class="text-warning">Restricted</span>
                     </li>
                    <%} else {%>
                     <li class="list-group-item">
                         <strong>Account Status: </strong><span class="text-success">Good</span>
                       </li>
                 <%}%>

                  <li class="list-group-item">
                    <strong>Member Since: </strong> <%= dateConversion(currentUser.joinedDate.substring(0,10))%>
                  </li>
                  
                  <%if(currentUser.email){%>
                    <li class="list-group-item">
                        <strong>Email:</strong> <p><a href="mailto:<%=currentUser.email%>"><%=currentUser.email%></a></p>
                    </li>
                  <%} else {%>
                    <li class="list-group-item">
                        <strong>Email:</strong> <p class="fst-italic">(email not provided)</p>
                    </li>
                  <%}%>

                  
                </ul>
                
                <div class="my-5">
                  <button class="btn btn-primary btn-sm">Edit Profile</button>
                  <button class="btn btn-outline-secondary btn-sm">Settings</button>
                </div>
                
              </div>
            </div>
          </div>
        </div>
      </div>
      <%- include('partials/_footer') %>

</body>
</html>